<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Friend Finder</title>

    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <!-- Custom styles for this template -->
    <link href="css/cover.css" rel="stylesheet" />
</head>

<body class="text-center">
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header class="masthead mb-auto">
            <div class="inner">
                <h3 class="masthead-brand">Friend Finder</h3>
                <nav class="nav nav-masthead justify-content-center">
                    <a class="nav-link" href="index.html">Home</a>
                    <a class="nav-link active" href="#">Survey</a>
                </nav>
            </div>
        </header>
        <div class="container">
            <h2>Survey Questions</h2>
            <hr />
            <br />

            <h3><strong>About You</strong></h3>
            <h4>Name (Required)</h4>
            <input type="text" id="name" class="form-control" required />
            <div class="invalid-feedback">
                Please provide a name.
            </div>
            <br />
            <br />
            <h4>Link to Photo Image (Required)</h4>
            <input type="text" id="photo" class="form-control" required />
            <div class="invalid-feedback">
                Please provide a img url.
            </div>
            <br /><br />
            <hr />

            <h3><strong>Question 1</strong></h3>
            <h4>"You love to listen to classical music in your free time"</h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a1" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 2</strong></h3>
            <h4>"You love visiting local museum over theme parks on vacations"</h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a2" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 3</strong></h3>
            <h4>
                You prefer romantic movies over action movies.
            </h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a3" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 4</strong></h3>
            <h4>You would jump at the chance to sing solo instead of a choir.</h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a4" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 5</strong></h3>
            <h4>
                You would rather be in thumbscrews than watch Justin Bieberâ€™s concert.
            </h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a5" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 6</strong></h3>
            <h4>
                However bad the situation is ; you are happy..bad times does not last forever
            </h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a6" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 7</strong></h3>
            <h4>
                You love piercings and tatoos ; for heaven's sake you are covered in them.
            </h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a7" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 8</strong></h3>
            <h4>
                You hate seeing injustice done; and jump right in the fray to protect the voiceless.
            </h4>
            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a8" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 9</strong></h3>
            <h4>
                You can face a tiger but the prospect of taking a test leaves you whimpering!
            </h4>

            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a9" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <h3><strong>Question 10</strong></h3>
            <h4>
                You love living in a big city, country air does nothing for you
            </h4>

            <div class="d-flex justify-content-center my-4">
                <span class="font-weight-bold blue-text mr-2 mt-1">Disagree</span>

                <input type="range" class="custom-range" min="0" max="5" step="1" id="a10" />
                <span class="font-weight-bold blue-text mr-2 mt-1">Agree</span>
            </div>

            <br />
            <br />

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
          Submit
        </button>
            <div></div>

            <hr />

            <div>
                <a href="/api/friends">Friends list</a>
                <span> | </span>
                <a href="/api/questions">Questions list</a>
            </div>

            <hr />

            <hr />
            <footer class="mastfoot mt-auto">
                <div class="inner">
                    <p>
                        Credit : <a href="https://getbootstrap.com/">Bootstrap</a>, by
                        <a href="https://twitter.com/mdo">@mdo</a>.
                    </p>
                </div>
            </footer>
        </div>
    </div>
    <!-- <script src="../js/friendfinder.js"></script> -->
</body>
<!-- Modal -->
<!-- Button trigger modal -->

<!-- Modal -->
<div class="modal fade" id="matchfound" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><strong>Best Match</strong></h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
            </div>
            <div class="modal-body">
                <h2 id="matchfoundName"></h2>
                <img id="matchfoundImg" src="" alt="" />
                <h2 id="matchDifference"></h2>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
            </div>
        </div>
    </div>
</div>

<!-- Error Modal -->
<div class="modal fade" id="errorModal" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><strong>Oops! We are missing some data</strong></h2>
            </div>
            <div class="modal-body">

                <h5 id="errMessagesCreated"></h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    // validate the form inputs and find the best match
    $("#submit").on("click", function(event) {
        event.preventDefault();


        var selectedValues = [
            document.getElementById("a1").value,
            document.getElementById("a2").value,
            document.getElementById("a3").value,
            document.getElementById("a4").value,
            document.getElementById("a5").value,
            document.getElementById("a6").value,
            document.getElementById("a7").value,
            document.getElementById("a8").value,
            document.getElementById("a9").value,
            document.getElementById("a10").value,
        ];
        console.log(selectedValues);
        //validate 
        var isValidName = true
        var isValidImg = true
        if ($("#name").val() === "") {
            isValidName = false;
        }

        if ($("#photo").val() === "") {
            isValidImg = false;
        }

        if (isValidImg && isValidName) {

            var jsonReq = {
                name: document.getElementById("name").value,
                image: document.getElementById("photo").value,
                scores: selectedValues,
            };
            console.log(JSON.stringify(jsonReq));

            $.post("/api/matchfriend", jsonReq, function(data) {
                // If a match is found...
                if (data) {
                    console.log(data);
                    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                    $("#matchfoundName").text(data.name);
                    $("#matchfoundImg").attr("src", data.image);
                    $("#matchDifference").text("The difference in match point is " + data.difference)

                    // Show the modal with the best match
                    $("#matchfound").modal("toggle");
                }

                // If a match is not found...
                else {
                    //it should never ever reach this point because the most compatible match is always displayed
                    alert("There is a huge BUG if you  have reached here ");
                }
            });
        } else {
            var errMessage = ""
            if (!isValidName) {
                errMessage = errMessage +
                    "<li>Missing Name - Please enter what your new found friends should call you!</li>";
            }
            if (!isValidImg) {
                errMessage = errMessage + "<li>Missing Image - A picture is worth a 1000 words!</li>"
            }

            $("#errMessagesCreated").html(errMessage)

            // Show the modal with the best match
            $("#errorModal").modal("toggle");

        }
    });
</script>

</html>